:description: Example Database Documentation
:category: Example

= Example Database Documentation
Mateusz Budzisz

The exactly same database is being used in production on regatta aggregating service.

== Tables

* Sailors

[source, sql]
-----
-- Holds every information about sailor you may ever want to know,
-- including personal stuff,
-- but not feature flags â€“ these should be inside some specific tables.
drop table if exists sailors cascade;
create table sailors (
     -- Sailors can't be identified by sail numbers,
     -- as they tend to be used by multiple owners,
     -- not to mention sailor can change it freely too.
    sailor_id bigserial,

    -- Using boolean here could be optimal,
    -- but since char is the same disk space overhead,
    -- we should really leave char for sake of readability.
    -- Furthermore, no need to complicate with custom enum type,
    -- and hence simple check is sufficient.
    sex char check (sex IN ('F', 'M')) not null,

    birth_date date not null,
    given_name varchar(128) not null,
    family_name varchar(128) not null,

    primary key (sailor_id),
    unique (sailor_id)
);
-----

* Clubs

[source, sql]
----
-- Holds every information about club
drop table if exists clubs cascade;
create table clubs (
    -- Clubs could be identified by their short name,
    -- but since we do not know length of that name
    -- and it can contain some non ascii characters it is rather bad idea.
    club_id bigserial,

    -- As clubs self  regulates naming,
    -- they may have an abbreviation of the name that we cannot guess from the full name.
    -- Furthermore, it is more convenient to use that shorter version in some (unfortunately not every) cases.
    short_name varchar(64) not null,
    full_name varchar(256) not null,

    primary key (club_id),
    unique (club_id)
);
----
